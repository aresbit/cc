# 无线局域网（WLAN） 芯片设计构造与解释1

涵盖设计、建模、验证、实施、集成和测试的所有步骤。

# 架构

- 数据链路层

数据链路层提供两个直接连接的节点之间的数据传输。当多个传输实例想要访问物理介质时，它遵守并维护物理介质上的共享规则。通常，数据链路层还纠正物理层的错误。它包括两个子层：媒体访问控制（MAC）和逻辑链路控制（LLC）。网络交换机在这一层运行。

- 物理层

代表系统的电气和物理特性。这包括不同的通信介质（铜线、光纤、定向电磁波束和无线电链路）和相应的物理要求（物理和逻辑接口、电源、逻辑电平规定、输出功率电平等）。物理层还指定信号调制和数据编码方案，并提供信道评估技术（信道空闲或繁忙）。
![image](https://github.com/aresbit/cc/assets/33110495/9e123815-071a-4e00-b912-3a85307b40b4)


蜂窝系统的覆盖区域被划分为不重叠的小区，其中为每个小区分配一组信道。这个相同的信道集被用在另一个遥远的小区中。小区内的操作由集中基站控制。

WLAN 是移动设备可以进行无线通信（通过无线电链路）的网络。每个移动设备都配备了收发器， IEEE 标准 802.11 指定了 WLAN 的两个最低 OSI 模型层：媒体访问控制 (MAC) 子层和物理层 (PHY)。 MAC 是一组确定如何访问介质和发送数据的规则，而传输和接收的细节则留给 PHY。

## 建模

### mac子层

大多数 WLAN 都在基础设施基本服务集 (BSS) 模式下运行。在这种情况下，所有 WLAN 站都通过单个无线跳与表示为接入点 (AP) 的中央实体进行通信。通常，AP 充当有线通信基础设施（互联网）的网关，以便 WLAN 站点可以连接到世界各地的对等节点。或者，WLAN 节点可以形成自组织网络（独立基本服务集，IBSS）。

WLAN 站点在发送帧之前使用两种先听后讲 (LBT) 机制来感知无线介质：物理载波感知 (P-CS) 和虚拟载波感知 (V-CS) NAV。![image](https://github.com/aresbit/cc/assets/33110495/1daac5a2-34dd-4480-b939-add82a022b0a)

由于WLAN收发器在同一RF信道上发送和接收，但接收到的无线信号强度比发射的信号强度小得多，因此它不能同时发送和接收，也无法检测到冲突。它必须依赖于在传输之前等待随机时间段的冲突避免（CA）过程。定义了两个基本参数

- 短帧间间隔 (SIFS)，介质上两次传输之间的最小时间间隙。
- 时隙，定义 ED以及向 MAC 子层指示结果所需的周期。

对于新的帧传输，只有当介质在至少SIFS+EDSlot的持续时间内保持空闲时，发送站才可以访问无线介质。该持续时间称为点协调函数帧间空间（PIFS）。为了向中央协调实体或点协调器（PC）提供最高优先级，其他站必须等待更长的时间。它们最早在SIFS+2xEDSlot时间段之后访问无线介质，这被称为分布式协调功能帧间空间(DIFS)。为了避免多个站同时传输的可能性，DIFS站需要等待多个EDSlots（所谓的退避时间）。

DCF（Distributed Coordination Function）是WLAN的基本协调功能。它实现了载波侦听多路访问（CSMA）和冲突避免（CA）机制。对于每个失败的帧传输，DCF 将竞争窗口 (CW) 大小加倍，并以 0 和 CW 之间的随机数绘制新的退避时间。此后，该站可能会尝试再次发送该帧。每次成功传输帧后，CW 都会重置为某个（取决于 PHY）最小值。为了检测传输失败，接收器确认每个成功接收的单播帧。缺少确认帧 (ACK) 表示失败。

CF 的优点是它不需要中央控制器来管理信道访问，但仍能实现可接受的冲突水平。因此它可以很容易地用于自组织网络中。然而，集中控制的访问机制提供了更好的效率，因为可以避免由于退避过程而导致的大量等待时间的开销。 WLAN 标准定义了许多协调功能。所谓的点协调功能 (PCF) 是原始 IEEE 802.11 的一部分，但并未获得太多普及。后来，IEEE802.11e修订版引入了增强型

分布式信道接入（EDCA）和混合协调功能（HCF）。它们可以保证数据流量的服务质量（QoS）。基本原理是，QoS 感知接入点 (QAP) 根据各自的 QoS 向网络中的客户端分配传输机会 (TXOP)。

### WLAN物理层

1999 年的原始 IEEE 802.11 规范包括两个物理层

工作在免许可 2.4 GHz RF 频段：跳频扩频 (FHSS) 层和直接序列扩频 (DSSS) 层。两者现在都完全过时了。后来的修订版（802.11a 和 802.11b）添加了基于正交频分的 5 GHz 频段物理层复用 (OFDM) 和 2.4 GHz 的高速直接序列扩频 (HR/DSSS) 层。 802.11g 修订版提供了更高的速度，使用 2.4 GHz 的 OFDM 并向后兼容 802.11b。所有这些模式提供高达几个 10 Mbps 的数据速率。 802.11n 修正案增加了多输入多输出 (MIMO) 技术，支持高达几个 100 Mbps。最新修订版 802.11ac 和 802.11ad 指定物理层数据速率达到数 Gbps，并使 60 GHz 频段可用于高速 WLAN。 WLAN 物理层的通用框图如图 1.5 所示。

后向兼容性考虑abgn ac ax be.

物理层模型如下：![image](https://github.com/aresbit/cc/assets/33110495/be19d384-25e3-45b7-93bd-10d48950bacc)


### 数字基带

将原始数字数据编码成适合传输的形式。数字流必须转换为表示数字信号的同相 (I) 和正交 (Q) 模拟信号分量的幅度和相位星座。为了提高无线信道的容量，可以使用不同的技术在同一信道上复用多个基带信号：频域复用、时域复用、码分复用或这些技术的组合。

PHY 帧通常由帧前导码、PHY 标头（PLCP 标头、物理层汇聚过程）和 PHY 有效负载（PSDU、PLCP 服务数据单元）组成。后者传输更高层的数据，即AMDPU， CRC。

Preamble前导码的目的是同步接收器处的传入帧，即补偿由于石英晶体容差而导致两个站的 RF 载波频率（以及基带频率）的差异，并确定开始解调的正确时间点。此外，接收器的自动增益控制（AGC）必须有一些时间来稳定在适当的信号放大水平。 PHY 标头通常传输有关帧的调制和编码方案的信息，即数据速率、前向纠错 (FEC) 等。对于 WLAN 等可变长度帧，它还指定帧长度（数据包大小）。

PHY 帧结构的详细信息很大程度上取决于相应的 PHY 版本。

由于 MAC 协议最多 2300 字节的限制，phy帧长度理论上最多到 4095 字节。

标头受到卷积纠错码的保护，需要 6 个尾部位和一个允许错误检测的奇偶校验位。此外，帧有效负载受到卷积码的保护，导致接收器侧需要维特比解码器。

PSDU：![image](https://github.com/aresbit/cc/assets/33110495/f92712e8-b4b1-4814-a94b-b318e009e5dc)

调制

范围从相对简单的互补码键控（CCK、IEEE 标准 802.11b）到OFDM OFDMA，到非常复杂的 MIMO 方案，该方案使用许多天线和数据流，并且需要常规训练序列（通常作为帧前导码的一部分）。

![image](https://github.com/aresbit/cc/assets/33110495/362ad4ef-1de9-4f12-aa2c-0fb9ab082d0e)


IEEE 标准 802.11a 将频段划分为 64 个子频段。

802.11n 和 802.11ac 定义了使用多达 468 个子载波的不同模式，从而支持多种 PHY 数据速率。每个子载波可以单独地以 BPSK、QPSK 或某些 QAM 进行调制，具体取决于该子带中的信噪比 (SNR)。所有子载波均使用快速傅立叶变换 (FFT) 进行联合调制和解调。这保证了子带的正交性，即它们不会互相干扰。一些子载波不用于数据传输。除了许多数据子载波之外，导频子载波（在图 中标记为虚线半椭圆）在整个信道中间隔开。导频子载波用于同步和信道估计。请注意，信道中有一些区域禁止使用子载波。通常，这些区域被称为空子载波（图  中的小尺寸半椭圆）。空子载波被放置在信道的边缘以防止信道间干扰。最值得注意的是在信道中心使用空子载波。这消除了污染该区域的 OFDM 调制的中心频率的问题，即混频器的 LO 泄漏。

### IRF中射频

DFE  AFE RF

模拟前端执行从数字世界到可以使用天线通过空气传输的射频信号的转换。发射和接收功能结合在所谓的收发器中。

从架构的角度来看，发射器和接收器非常对称。发射器首先使用数模转换器 (DAC) 将数字信号转换为模拟信号，混频到RF后，PA使信号适应天线阻抗并提供足够的功率。另一方面，接收器首先使用低噪声放大器放大来自天线的射频信号（由于传输介质的衰减，该信号可能很弱）。然后，射频信号通过一个或多个混频级进行下变频，这些混频级处理同相和正交两个路径，以正确恢复所需信号。在信号链的末端，模数转换器 (ADC) 最终将相对低频的模拟信号转换为数字信号。消费电子一般采用零中频架构。

发射机只需处理受控的确定性信号，而接收机必须正确处理天线捕获的任何信号。

## 数字基带

OFDM 是一种在大量相邻子载波上同时传输数据的调制方法。将在每个子载波上发送的符号在频域中收集，并且使用快速傅立叶逆变换（IFFT）同时将其全部变换为时域信号。这个想法是每个子载波信号具有非常小的带宽（与信道的相干带宽相比），因此仅受到平坦衰落的影响。信道均衡包括将每个子载波乘以一个复数常数，以便将星座点缩放和旋转到其正确位置。由于在发射机侧的 IFFT 之后向每个符号插入了循环前缀 (CP)，因此接收机侧的这种简单信道均衡是可能的。它将线性卷积转换为循环卷积（FFT 的乘积）。循环前缀还充当保护间隔，抑制相邻 OFDM 符号之间的符号间干扰 (ISI)。只要延迟扩展比 CP 短，ISI 就不是问题。 OFDM 数字基带的架构由两个主要模块组成：发送器和接收器。根据这种划分，基带处理发生在两个几乎独立的数据流方向：发送和接收

发射机由输入缓冲器、扰码器、信号场发生器、编码器、交织器、映射器、IFFT、导频插入、CP插入和前导码插入组成。接收器由同步器、FFT、信道估计器、解映射器、解交织器、解码器和解扰器。这些基带组件基于复值数据和基于位的运算执行计算：

![image](https://github.com/aresbit/cc/assets/33110495/ced4d859-66cf-491a-9d02-edf51f40378a)


数据由I/Q对组成，被视为复数值。要执行的功能有调制/解调、同步、信道估计/均衡、IFFT/FFT、循环前缀插入/去除、频偏估计/补偿等

基于对各个数据位的操作（加扰/解扰、信道编码、纠错和交织/解交织）。这往往会使它们的软件实现效率相当低。另一方面，许多这些操作可以在非常小的硬件块中实现。例如，加扰和卷积编码可以实现为具有异或门的线性反馈移位寄存器。 不同于软件无线电等5G无线解决方案，WiFi方案考虑采用实现成本和难度更大的SOC  HAC硬件加速解决方案。

### 加扰组件

在许多通信系统中，对输入数据进行加扰，目的是提供频繁的转换并避免周期性数据和/或重复输入在传输信号中产生非常小的变化的情况。实质上，定时恢复和自动增益控制电路的正确操作不可避免地需要频繁的转换。理想情况下，调制信号应该有许多转变，并且星座中的所有点都应该定期访问。加扰可确保任何输入数据的这种情况。此外，加扰功能还使功率谱独立于传输的数据，从而将功率平滑地分布在可用带宽上。这减少了射频干扰和通道串扰，因为功率不集中在窄频带中。

当实施加扰时，输入数据在调制之前通过加扰器。之后，调制信号通过通信信道并被解调。最后，解调后的数据通过解扰器以恢复原始数据。

加扰器/解扰器系统的主要组成部分是可编程长度移位寄存器和模2加法器（通过使用异或门实现）。换句话说，加扰器/解扰器基于具有良好统计特性和高效硬件实现的线性反馈移位寄存器（LFSR）。

为了正确重建原始比特流，解扰器中的 LFSR 应与扰码器中的 LFSR 同步。根据同步方法，使用以下两种加扰技术[6]： a) 同步加扰——该方法使用同步字。同步字是在每帧中以相等间隔放置在数据流中的模式。接收器在相邻帧中搜索一些同步字，从而确定必须用预定义的初始状态重新加载其 LFSR 的位置。同步解扰器与同步扰码器是同一设备。

![image](https://github.com/aresbit/cc/assets/33110495/88a56067-4bd6-4bb0-b699-0e713a74115e)


### 纠错码

由于典型的无线电信道多径衰落，无线通信会出现高错误率。然而，WLAN 应用需要克服信道缺陷并显着降低错误率。前向纠错（FEC）方法使用纠错码，通过在传输前向信息包添加冗余来处理比特错误。接收器使用这种冗余首先检测错误，其次纠正错误。图 2.4 描述了 FEC 操作，其中编码器将 k 位传输数据映射为 n 位码字，解码器检测并纠正错误以获得原始数据。

CRC 码使用线性反馈移位寄存器实现，并用于链路层协议的错误检测，其中数据传输单元称为帧。 CRC 用于检查数据块是否有错误。如果接收端的计算结果与发送端的计算结果不同，接收端会再次请求数据。 CRC 很受欢迎，因为它们在二进制硬件中实现起来很简单，易于数学分析，并且特别擅长检测由传输通道中的噪声引起的常见错误。 CRC 码的规范需要定义所谓的生成多项式。该多项式成为多项式长除法中的除数，该除法将消息作为被除数，商被丢弃，余数成为结果。 CRC 特别适合检测突发错误：消息中错误数据符号的连续序列。这很重要，因为突发错误是许多无线通信信道中常见的传输错误。该方案很复杂，但代表了一种有效的错误检测技术。

FEC码：

线性分组码（无线技术中经常使用）是循环的，

可以使用基于线性反馈移位寄存器的编码器和解码器来高效且轻松地实现一般类型的循环码。这些代码的循环性质为它们提供了更多结构

二进制 Bose-Chaudhuri-Hocquenghem (BCH) 码和非二进制 Reed-Solomon (RS) 码是两种广泛使用的线性循环块码。

都采用异或运算不无理由，本质上异或运算是图灵完备的。

BCH 码是汉明码的推广，可用于纠正大小为 t 或更低的任何错误模式。BCH 代码在 WLAN 中并不常用。

分组码和卷积码的区别在于编码原理，卷积码不是按块将信息映射到码位，而是根据某种规则顺序地对信息位序列进行卷积。该代码由由不同数量的移位寄存器组成的电路定义，允许构建不同复杂度的代码。块编码方案经常被称为无记忆的，因为连续的信息块是独立编码的。卷积编码器是一类流行的具有记忆功能的编码器。

低密度奇偶校验 (LDPC) 代码是传统上用于 WLAN 系统的最有前途的近最优解决方案。

LDPC块码和LDPC卷积码。然而，由于实际硬件实现中的功耗和面积限制等许多实际考虑，大多数研究都集中在 LDPC 块码上。

### 交织

只要单个码字中没有太多错误，纠错码（ECC）就可以有效地纠正错误。本质上，ECC 是指纠正一个码字内随机位错误的能力。虽然错误位置可能是随机的，但一个码字内可纠正的错误位数至关重要，并且取决于所选的 ECC 技术。然而，无线通信信道容易出现突发错误。突发错误是由较长时期内发送信号的失真引起的不可靠解释的比特序列。即，错误往往是突发性的（许多错误集中在本地），典型的纠错方案无法成功处理。为了以令人满意的方式对抗突发错误，通常使用交织技术。

交织作为通信系统中使用的标准信号处理技术，通过根据特定方案在发送端对比特重新排序并在接收端恢复原始顺序来解决此类错误。结果，错误位分布在交织块或窗口上，因此局部错误密度降低，从而允许解码器纠正更多位。

交织的经典用途是分散比特流中的比特序列，以便最大限度地减少传输中引入的突发错误的影响。每个交织器都有一个相应的解交织器，作用于原始交织器的输出，并将符号放回其原始顺序（可能有时间延迟）。

当 OFDM 信号遭受多径衰落（例如 WLAN 的情况）时，多个相邻载波可能会严重衰减，并且信号可能会被加性噪声破坏。此外，阴影衰落还会使几个连续的 OFDM 符号恶化。关于 OFDM 符号，可以实施两种可能的解决方案来应对深度衰落。第一种是在时间的物理维度上实现密切相关的比特的分离，因此这种分离称为时间交织。原则上，时间交织引入了解码延迟，因为所有密切相关的比特必须首先被接收，然后被解码。

在第二种情况下，当考虑多载波传输时，有一种方法可以在频域中的每个 OFDM 符号内部实现物理比特分离。这称为频率交织。引起时域和频域去相关的物理原因是独立的，因此具有时间和频率交织的多载波传输对于无线电传输系统来说是一种非常强大的校正技术。频率交织器是遵循被划分为子载波的频带的块结构的块交织器。

由于信道的慢衰落特性，时间交织并不经常应用于 WLAN 系统中。

IEEE 802.11 交织的典型实现需要标准块交织器和专用硬件。

数据按列写入并按行读取。交织器由两步排列定义。第一个置换确保相邻的编码比特被映射到不相邻的子载波上。第二个确保相邻编码位交替映射到星座的较低和较高有效位，从而避免低可靠性位的长串。

### 映射

子载波映射器将单独的数据符号分配给单独的子载波。它是大多数 OFDM 系统的构建块，主要是因为不同的数据符号可能来自不同的用户，并且将数据符号分配给不同的子载波允许多个用户共享无线电信道。位交织后，数据位继续串行至星座映射器 [5]。星座映射器接受串行比特流作为输入，并将该流分段为 k 位符号，这些符号被映射到信号星座图中的坐标。二维信号星座图中每个点的坐标表示调制正交子载波信号的基带同相（I）和正交（Q）分量。星座映射器定义信号星座的形状和尺寸，换句话说，调制信号。通常的做法是以相邻符号在单个位上不同的方式对符号进行编码（称为格雷编码）。如果接收器错误地检测到给定符号，则很可能该符号中只有 k 位中有一位出错。这种采用二进制相移键控 (BPSK)、正交相移键控 (QPSK) 或正交幅度调制 (QAM) 形式的编码方案提高了传输方案在存在噪声信道的情况下的鲁棒性。

### 导频插入

比如梳状。

### FFT

OFDM 收发器通过将宽带划分为许多并行传输数据的正交子载波来支持高数据速率并避免符号间干扰 (ISI)。因此，在具有 N 个子载波的系统中，每个子载波的数据速率降低了 N 倍。通过这种方法，信道被分成许多窄带平坦衰落子信道。这使得 OFDM 系统比单载波通信系统更能抵抗多径频率选择性衰落。子载波完全独立且彼此正交。

OFDM信号是通过在发射机侧实施快速傅里叶逆变换（IFFT）[13]将符号从频域转换到时域以及在接收机侧实施快速傅里叶变换（FFT）[14]以将符号从频域转换为时域而生成的。将时域符号转换回频域符号

![image](https://github.com/aresbit/cc/assets/33110495/0049164b-c942-4fa4-b01a-5e369047b3cc)


OFDM系统能够将高速率数据流（带宽=W）分解为N个较低速率数据流，然后通过大量子载波同时传输它们。各个子载波的选择使得它们彼此正交。这允许子载波与相邻子载波的高阶频谱分量重叠。正交性确保子载波的最佳分离，并同时提供子载波之间的最小间隔。换句话说，频谱重叠的使用提供了优异的带宽利用率。

在基本 OFDM 系统的频率选择性多径衰落信道中，同步失配通常非常关键，因为信号的每个延迟回波分量都会违反正交性。这导致严重的符号间干扰(ISI)，并且另外引起载波间干扰(ICI)的问题。这一特性是由于频谱分量重叠而导致正交性丧失的结果，似乎使窄义 ODFM 失去了作为多径信道中有用技术的资格。

然而，有一种简单的技术可以修改发射信号，从而在存在多径信号分量的情况下以某种方式保留正交性。解决这个问题的一个有效方法是引入保护间隔（也称为循环前缀）。通过为每个 OFDM 符号引入保护间隔来消除 ISI。选择的保护间隔大于预期的延迟扩展，因此来自一个符号的多径分量不会干扰相邻符号。这段时间可能没有信号，但 ICI 问题仍然存在。为了消除 ICI，在保护间隔中循环扩展 OFDM 符号

循环前缀 (CP) 是 OFDM 帧最后部分的副本，位于传输帧的开头之前（图 2.15）。循环前缀的长度应该大于或等于（缩短的）信道脉冲响应的长度。如果循环前缀足够长，则传输的信号是周期性的并且帧的正交性得以保留。

![image](https://github.com/aresbit/cc/assets/33110495/06b2737a-6161-4045-a16b-08019369d4c8)




OFDM信号对多径传播引起的时间色散具有鲁棒性。

与时间色散相比，OFDM信号对信道时变引起的频率色散相对更敏感。时间变化破坏了子载波的正交性，从而发生载波间干扰（ICI）。即，对载频偏移的敏感度会引起子载波的衰减和旋转，最终导致相邻子载波之间的ICI。换句话说，子载波的正交性由于载波频率偏移而丢失。脉冲整形是一种成熟的技术，用于进一步减少这种不良现象。

在 OFDM 频谱中，每个载波均由一个主瓣组成，后跟多个幅度减小的旁瓣。只要保持正交性，载波之间就不存在干扰，因为在每个峰值

尽可能地减少旁瓣。大多数传统的脉冲整形滤波器（例如升余弦 (RC) 和平方根升余弦 (SRRC)）都满足此条件，但也设计了其他滤波器来满足更多目标。脉冲整形滤波器已广泛应用于最先进的通信系统中。 802.11a WLAN 系统、宽带码分多址 (WCDMA) 和 3GPP 长期演进 (LTE) 等各种标准建议使用平方根升余弦 (SRRC) 脉冲作为发送和接收滤波器。

IEEE 802.11a WLAN 标准OFDM：

![image](https://github.com/aresbit/cc/assets/33110495/e8ae4d86-5645-4d0a-8fc1-38bd45f211c7)


两个训练序列，分别表示为短训练（ST）和长训练（LT），每个训练序列的持续时间为 8 μs。 ST 包含 10 个相同的部分，表示为 t0 至 t9。每个部分由

16 个复值样本。前七个部分（t0 至 t6）用于信号检测、自动增益控制和分集选择（如果有多个天线）

被使用）。接下来的三个部分（t7 到 t9）用于粗略频率偏移估计和定时同步。 LT 由两个相同的部分组成，

标记为T0和T1以及保护间隔GI2。 T0 和 T1 各由 64 个

复数值。 T1 的最后 32 个样本用于保护间隔 GI2

（循环前缀）。当帧容易受到多径衰落影响时，GI2 保护 LT

来自 ISI（T0 和 T1 相同），延迟扩展小于 GI2 的持续时间。 LT 用于信道估计和精细频偏估计。

LT 之后是一系列 OFDM 符号，每个符号的持续时间为 Tu = 4 µs

由 80 个复值样本组成。 N=64个携带信息的样本

（由发射机处的 IFFT 生成）使用 Ng=16 个样本进行前缀扩展

（保护间隔表示为GI）与最后16个携带信息的样本相同。

### 同步

经过射频前端处理后，基带信号由自动增益控制 (AGC) 块进行归一化，提供恒定的信号幅度。之后，信号必须及时同步

粗时间同步（CTS）识别前导码以检测数据包到达，即为精细时间同步提供参考点。 ii) 精细时间同步（FTS）估计剩余时间偏移。可以通过执行以下方法之一在时间同步过程中使用前导码：

a) 实现基于前导码（ST符号、LT符号和GI）重复结构的自相关函数，目的是获得定时同步。

b) 实现互相关函数，该函数利用预定义训练序列的良好自相关特性来获得精确的定时。

### 信道估计

信道估计的目标是提供与信号在信道中传播时的失真相关的信息。然后均衡器使用获得的信息来消除衰落效应和 ICI。有两种类型的信道估计器：非数据辅助的和数据辅助的。

盲信道估计器）仅使用接收信号统计特性来实现信道估计。不需要专门的训练信号（不需要额外的冗余）。这种方法保留了传输效率。然而，它需要大量数据收集才能生成准确的信道估计。

另一方面，数据辅助估计器使用已知的训练信号并且可以提供快速且准确的信道估计。在实际情况中，必须使用足够数量的训练信号（训练信号的数量取决于信道变化，即信道的相干时间和相干带宽）。这种类型的信道估计被用在基于 IEEE 802.11a OFDM 的通信系统中。

在标准IEEE 802.11a中，实现了梳状导频辅助信道估计方案。为此，常用的方法有：a）时域加窗和b）频域插值。让我们注意，这两种方法有不同的实现，但生成相同的结果。

## IRF

1) 调整来自数字部分的基带数据信息，以便通过通信信道中的可用频段
2) 确保接收器路径中给定传输速率和信号功率的正确重建。

IQ调制将通道容量提高 2 倍。

理论数据速率计算：

![image](https://github.com/aresbit/cc/assets/33110495/51db964d-892a-48e9-953b-147db9f7d430)


IEEE 802.11 OFDM 方案：从收发器 RF 和混合信号前端的角度来看，OFDM 技术可以理解为一种模拟调制方案，其中构建了消息 I(t) 和 Q(t)同时作为 IQ（复数）基带信号，该信号考虑多个子载波，固定符号率等于 T sym = 3.2us。保护间隔 (GI)，范围为

根据所需的传输速率，在符号之间考虑 800ns 和 400ns 以优化传输。

为了确保子载波之间的调制消息不会相互干扰，子载波之间的频率间隔等于符号时间的倒数，f 子载波 = 1/3.2μs = 312.5kHz

![image](https://github.com/aresbit/cc/assets/33110495/af59ac62-3ad1-4423-a69b-9702a138585a)


误差矢量幅度 (EVM)：它是基于 OFDM 的高速配置的 802.11 发射机调制质量的主要指标。如图 3.5 所示，它被定义为 IQ 星座平面中误差矢量的幅度与理想符号参考的比值

## 发射机架构

发射机实现的基本功能有三个：将复杂的调制信号转换为真实信号、将其频移至载波频率以及将其放大并适应辐射天线。这些功能中的任何一个都可以承担多种实际实现，因此我们可以想象尽可能多的发射机架构组合。

ZIF

![image](https://github.com/aresbit/cc/assets/33110495/15de1c59-6a3c-4a0b-adf9-f0bc08d1d0b3)


这种架构对射频耦合特别敏感。混频器必须在高频下工作，因为它们由射频载波信号驱动。在射频电路中，将输出与输入完全隔离是非常麻烦的。因此，载波频率很可能泄漏到输出频谱中。这种泄漏无法通过进一步滤波来消除，因为它位于有用信号的带宽内。任何 DAC 中的偏移都会在输出频谱中产生相同的效果：载波频率上出现不需要的音调。诸如 OFDM 之类的调制方案可以对载波泄漏提供一定的容忍度，因为与基带中的 DC 相关的子载波不用于数据。

此外，直接转换架构容易出现注入吸合。本地振荡器频率附近（根据经验考虑 20%）存在的高功率 RF 组件确实会干扰其频谱。缓解此问题的一个可能解决方案是使用两倍载波频率的 LO，本机振荡器 (LO) ，并将其输出除以二。这具有直接生成几乎完美的正交混频信号的额外好处。然而，由于射频模块的非线性，会发生谐波失真，产生一些载波频率倍数附近的射频功率。对于基于斩波器的混频器来说尤其如此，奇次谐波的功率非常重要。因此，LO 频率附近仍可能存在大量射频功率。因此，LO 和混频器的设计对于直接转换架构至关重要。

### 接收机

ZIF： LO泄漏、对IQ失配或由于偏移和闪烁噪声而导致的退化更加敏感。

耦合被下变频，并且在基带部分的输入端产生与干扰幅度成比例的直流分量，从而对总偏移产生影响。如果该偏移处理不当，它将被后端 PGA 放大，最终导致饱和或严重的接收器减敏和失真。在这种情况下，基于交流耦合结构或反馈环路（模拟或混合信号）的直流偏移补偿技术是强制性的.

IQ 数字校准。

即使在工作于 60GHz ISM 频段的 IEEE 802.11ad/ay 扩展中，直接转换架构 [21] 也是当今降低功耗和面积的最佳选择。





## 芯片设计

### 系统模型

![image](https://github.com/aresbit/cc/assets/33110495/75f5a41e-57a8-478b-8830-41e007b6ac01)


###  IEEE 802.11 MAC 功能的硬件/软件划分策略以及 MAC 子层的完整系统解决方案

IEEE 802.11 MAC 子层提供的功能允许通过无线介质为上层提供可靠的数据传输，数据速率高达 54 Mbps。它指定无线网络上的计算机如何访问接收和传输数据，以及如何维护已建立的通信。 IEEE 802.11 标准中使用的基本媒体访问控制方法是具有冲突避免功能的载波侦听多路访问 (CSMA/CA)。

第一步是使用系统描述语言 [37] 开发 IEEE 802.11 MAC 协议的详细仿真模型

该模型可用于验证所提出解决方案的功能正确性。另一方面，它可以作为性能调查的基础，以确定协议中需要软件优化（手动优化的 C 代码）或硬件实现的部分，以满足实时要求。

软件实现以下控制块，这些控制块具有低数据速率、复杂功能或以后扩展和修改的潜力：1) 接入点和移动客户端之间的连接设置，并管理省电模式； 2）认证和解除认证； 3）关联与解离； 4) 发送和接收数据队列。

以高吞吐量和相对简单的功能传输有效负载数据所需的架构块需要硬件实现：1) 循环冗余校验 (CRC) 和 RC4 加密，以及 2) 确认和重传。

硬件加速器功能（图 4.4）包括 MAC-PHY 接口的硬件驱动程序、从物理层逐字节检索 Rx 帧数据、地址过滤和 CRC 校验以及通过直接内存访问存储数据。此外，加速器从内存位置检索Tx帧数据，计算并附加校验和，并将数据推送到物理层。它通过中断指示帧的成功接收或发送，根据 WLAN 小区中的定时处理接收和发送的信标，并提取有关信道时间分配的信息。硬件加速器还管理确认、RTS 和 CTS 帧。最后，硬件加速器在竞争接入期间执行退避过程，并根据帧的有效负载长度和数据速率计算帧传输的实际持续时间。

### 数字电路模型

127 / 430

参考 

Zoran Stamenkovic - Silicon Systems For Wireless Lan (2020)
